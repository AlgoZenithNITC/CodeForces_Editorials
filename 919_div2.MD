## Partitioning the Array

<details>
<summary>Python</summary>

```python
def solve():
    n = int(input())
    A = list(map(int, input().split()))

    ans = 0
    for k in range(1, n + 1):
        if n % k == 0:
            g = 0
            for i in range(n - k):
                g = math.gcd(g, abs(A[i + k] - A[i]))
            ans += (g != 1)
    print(ans)

if __name__ == "__main__":
    tc = int(input())
    for _ in range(tc):
        solve()
```

</details>

<details>
<summary>Cpp</summary>

```cpp
#include <bits/stdc++.h>
using namespace std;

void solve(){
    int n;
    cin >> n;

    int A[n];
    for (int &i : A)
        cin >> i;

    int ans = 0;
    for (int k = 1; k <= n; k++){
        if (n % k == 0){
            int g = 0;
            for (int i = 0; i + k < n; i++)
                g = __gcd(g, abs(A[i + k] - A[i]));
            ans += (g != 1);
        }
    }
    cout<<ans<<"\n";
}

int main(){
    ios_base::sync_with_stdio(0); cin.tie(0);
    int tc;
    cin >> tc;

    while (tc--)
        solve();
}
```

</details>

<details>
<summary>Java</summary>

```java
import java.util.Scanner;

public class Main {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        int tc = scanner.nextInt();

        while (tc-- > 0) {
            solve(scanner);
        }
    }

    private static void solve(Scanner scanner) {
        int n = scanner.nextInt();
        int[] A = new int[n];

        for (int i = 0; i < n; i++) {
            A[i] = scanner.nextInt();
        }

        int ans = 0;
        for (int k = 1; k <= n; k++) {
            if (n % k == 0) {
                int g = 0;
                for (int i = 0; i + k < n; i++) {
                    g = gcd(g, Math.abs(A[i + k] - A[i]));
                }
                ans += (g != 1);
            }
        }
        System.out.println(ans);
    }

    private static int gcd(int a, int b) {
        if (b == 0) {
            return a;
        }
        return gcd(b, a % b);
    }
}
```

</details>

## Array Repetition

<details>
<summary>Python</summary>

```python
def solve():
    n, q = map(int, input().split())
    dp = [0] * (n + 1)
    lstAdd = [0] * (n + 1)

    for i in range(1, n + 1):
        a, v = map(int, input().split())

        if a == 1:
            lstAdd[i] = v
            dp[i] = dp[i - 1] + 1
        else:
            lstAdd[i] = lstAdd[i - 1]
            dp[i] = min(2e18, dp[i - 1] * (v + 1))

    for _ in range(q):
        k = int(input())

        while True:
            pos = dp.index(k, 1, n + 1) if k in dp else -1

            if pos != -1:
                print(lstAdd[pos], end=" ")
                break

            pos = next(x for x in range(1, n + 1) if k % dp[x - 1] == 0)
            print(lstAdd[pos - 1], end=" ")

            k %= dp[pos - 1]

    print()

if __name__ == "__main__":
    tc = int(input())
    for _ in range(tc):
        solve()
```

</details>

<details>
<summary>Cpp</summary>

```cpp
#include <bits/stdc++.h>
using namespace std;

#define ll long long

void solve(){
    int n, q;
    cin >> n >> q;

    ll dp[n + 1] = {};
    int lstAdd[n + 1] = {};

    for (int i = 1; i <= n; i++){
        int a, v;
        cin >> a >> v;

        if (a == 1){
            lstAdd[i] = v;
            dp[i] = dp[i - 1] + 1;
        }
        else{
            lstAdd[i] = lstAdd[i - 1];
            dp[i] = ((v + 1) > 2e18 / dp[i - 1]) ? (ll)2e18 : dp[i - 1] * (v + 1);
        }
    }
    while (q--){
        ll k;
        cin >> k;

        while (true){
            int pos = lower_bound(dp + 1, dp + n + 1, k) - dp;

            if (dp[pos] == k){
                cout<<lstAdd[pos]<<" \n"[q == 0];
                break;
            }
            if (k % dp[pos - 1] == 0){
                cout<<lstAdd[pos - 1]<<" \n"[q == 0];
                break;
            }
            k %= dp[pos - 1];
        }
    }
}

int main(){
    ios_base::sync_with_stdio(0); cin.tie(0);
    int tc;
    cin >> tc;

    while (tc--)
        solve();
}
```

</details>

<details>
<summary>Java</summary>

```java
import java.util.Arrays;
import java.util.Scanner;

public class Main {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        int tc = scanner.nextInt();

        while (tc-- > 0) {
            solve(scanner);
        }
    }

    private static void solve(Scanner scanner) {
        int n = scanner.nextInt();
        int q = scanner.nextInt();

        long[] dp = new long[n + 1];
        int[] lstAdd = new int[n + 1];

        for (int i = 1; i <= n; i++) {
            int a = scanner.nextInt();
            int v = scanner.nextInt();

            if (a == 1) {
                lstAdd[i] = v;
                dp[i] = dp[i - 1] + 1;
            } else {
                lstAdd[i] = lstAdd[i - 1];
                dp[i] = ((v + 1) > 2e18 / dp[i - 1]) ? (long)2e18 : dp[i - 1] * (v + 1);
            }
        }

        while (q-- > 0) {
            long k = scanner.nextLong();

            while (true) {
                int pos = Arrays.binarySearch(dp, 1, n + 1, k);

                if (pos >= 0) {
                    System.out.print(lstAdd[pos] + " ");
                    break;
                }

                pos = -pos - 1;

                if (k % dp[pos - 1] == 0) {
                    System.out.print(lstAdd[pos - 1] + " ");
                    break;
                }

                k %= dp[pos - 1];
            }
        }
        System.out.println();
    }
}
```

</details>
